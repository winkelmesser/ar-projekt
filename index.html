<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>LÃ¼beck AR - Station 1</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
        .arjs-loader {
            height: 100%; width: 100%; position: absolute; top: 0; left: 0;
            background-color: rgba(0, 0, 0, 0.8); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            color: white; font-family: sans-serif; flex-direction: column;
        }
        #start-button {
            padding: 15px 30px; background: #ff004c; color: white;
            border: none; border-radius: 8px; font-size: 1.2em; cursor: pointer;
        }
    </style>
</head>

<body style="margin: 0px; overflow: hidden;">
    <div class="arjs-loader" id="loader">
        <p id="status-text">Lade 3D-Welt...</p>
        <button id="start-button" style="display: none;">AR Starten</button>
    </div>

    <a-scene
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true; precision: medium;"
        embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">

        <a-assets>
            <a-asset-item id="schatz" src="./assets/Duck.glb"></a-asset-item>
        </a-assets>

        <a-nft
            type="nft"
            url="https://deinbenutzername.github.io/ar-projekt/assets/markers/Marker_1"
            smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5">
            
            <a-entity
                id="ente"
                gltf-model="#schatz"
                scale="50 50 50" 
                position="50 150 -100"
                rotation="-90 0 0"
                class="clickable">
            </a-entity>
        </a-nft>

        <a-entity camera cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
    </a-scene>

    <script>
        const loader = document.getElementById('loader');
        const statusText = document.getElementById('status-text');
        const startBtn = document.getElementById('start-button');

        // Event: Wenn die NFT-Daten geladen sind
        window.addEventListener('arjs-nft-loaded', () => {
            statusText.innerText = "Daten geladen!";
            startBtn.style.display = "block";
        });

        startBtn.addEventListener('click', () => {
            loader.style.display = "none";
        });

        // Debugging: Falls Dateien fehlen, zeigt es die Konsole (F12 am PC)
        window.addEventListener('nft-image-loaded', () => console.log("Bild-Features bereit"));
    </script>
</body>
</html>